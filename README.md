# canvas-to-react

canvaså›¾ç‰‡æ ‡æ³¨å·¥å…·  

<!-- [demo](https://codesandbox.io/s/throbbing-dust-tyn5wk?file=/index.html) | [æ•ˆæœ](https://tyn5wk.csb.app/) -->
[demo](https://codesandbox.io/s/boring-banach-tfpz34?file=/index.html) 

![example_lhizmZ](https://i.328888.xyz/2023/03/22/1ly1H.png)

## ç®€ä»‹
- æ”¯æŒtsç±»å‹:å¯ä»¥è·å–å®ä¾‹å¯¹åº”çš„tsç±»å‹ã€‚

- æ ‡æ³¨æ“ä½œ:æ”¯æŒçŸ©å½¢æ ‡æ³¨ã€å¤šè¾¹å½¢ã€ç‚¹æ ‡æ³¨ï¼›æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾;æ”¯æŒæ·»åŠ ã€ç¼–è¾‘æ ‡ç­¾ã€‚

- å›¾ç‰‡å’Œç‚¹é›†ä½ç½®:å›¾ç‰‡å’Œä½ç½®ç‚¹é›†è‡ªåŠ¨é“ºæ»¡ç”»å¸ƒã€‚

- æ ·å¼è‡ªå®šä¹‰:æ”¯æŒå…¨å±€æ ·å¼è®¾ç½®ï¼Œæ¡†é€‰æ–‡å­—é¢œè‰²å­—ä½“å¤§å°è®¾ç½®ã€‚

- æ”¾å¤§ç¼©å°:æ”¯æŒç”»å¸ƒç­‰æ¯”ä¾‹æ”¾å¤§ç¼©å°ã€‚

- æ ‡ç­¾å”¯ä¸€æ€§:æ¯ä¸ªæ ‡ç­¾éƒ½æœ‰è‡ªåŠ¨ç”Ÿæˆçš„uuid

- å¿«æ·é”®åˆ é™¤:æ”¯æŒdeleteå’ŒBackspaceå¿«æ·é”®åˆ é™¤å›¾ç‰‡æ ‡ç­¾

## 1ã€ä½¿ç”¨

- åˆ›å»ºå®ä¾‹ï¼Œè®¾ç½®å®ä¾‹åŒ–ä¼ å‚æŒ‡å®šéœ€è¦åˆ›å»ºå½¢çŠ¶ç±»å‹ã€‚

- åˆ›å»ºçŸ©å½¢æ—¶ï¼ŒæŒ‰ä½é¼ æ ‡å·¦é”®æ‹–åŠ¨å®Œæˆåˆ›å»ºã€‚

- åˆ›å»ºå¤šè¾¹å½¢æ—¶ï¼Œé¼ æ ‡å·¦é”®å•å‡»æ·»åŠ ç‚¹ï¼ŒåŒå‡»é—­åˆå®Œæˆåˆ›å»ºï¼Œ`Escape`é€€å‡ºåˆ›å»ºï¼Œ`Backspace`é€€ä¸€æ­¥åˆ é™¤é€‰æ‹©ç‚¹ã€‚

- æŒ‰ä½é¼ æ ‡å³é”®æ‹–åŠ¨ç”»å¸ƒã€‚

- é¼ æ ‡æ»šè½®ç¼©æ”¾ç”»å¸ƒã€‚

- é€‰ä¸­å½¢çŠ¶ï¼Œ`Backspace`åˆ é™¤ã€`delete`å¿«æ·é”®åˆ é™¤

- é€šè¿‡ instance.dataset æŸ¥çœ‹æ ‡æ³¨ç»“æœ

æ”¯æŒ UMD æ¨¡å—è§„èŒƒ

```
npm i canvas-to-react
``` tsä¸­å¼•ç”¨æ–¹å¼
import CanvasToReact from 'canvas-to-react';
const canvasSelect = new CanvasToReact(
        boxRef.current,
        'https://www.zhuhailiang.com/api/images/onepiece.png',
      );
```


## 1ã€å®ä¾‹å±æ€§

å¯¹ä»»æ„å±æ€§çš„ä¿®æ”¹éƒ½éœ€è¦è°ƒç”¨`instance.update()`æ›´æ–°è§†å›¾

| å±æ€§åç§°          |   ç±»å‹    |         é»˜è®¤å€¼         | å•ä¸ªå½¢çŠ¶å±æ€§ä¿®æ”¹ |     è¯´æ˜     |
| ----------------- |:-------:|:-------------------:| :--------------: |:----------:|
| lock              | boolean |        false        |                  |   æ˜¯å¦é”å®šç”»å¸ƒ   |
| MIN_WIDTH         | number  |         10          |                  |   æœ€å°çŸ©å½¢å®½åº¦   |
| MIN_HEIGHT        | number  |         10          |                  |   æœ€å°çŸ©å½¢é«˜åº¦   |
| strokeStyle       | string  |   rgb(0, 0, 255)    |       æ”¯æŒ       |   å½¢çŠ¶è¾¹çº¿é¢œè‰²   |
| fillStyle         | string  | rgba(0, 0, 255,0.1) |       æ”¯æŒ       |   å½¢çŠ¶å¡«å……é¢œè‰²   |
| activeStrokeStyle | string  |        #f00         |                  | é€‰ä¸­çš„å½¢çŠ¶è¾¹çº¿é¢œè‰²  |
| ctrlFillStyle     | string  |        #fff         |                  |  æ§åˆ¶ç‚¹å¡«å……é¢œè‰²   |
| ctrlRadius        | number  |          5          |                  |   æ§åˆ¶ç‚¹åŠå¾„    |
| pointRadius        | number  |          5          |                  |    åœ†åŠå¾„     |
| currentLabel        | number  |          5          |                  |    é»˜è®¤å¡«å……æ ‡ç­¾å€¼     |
| labelFillStyle    | string  |        #fff         |       æ”¯æŒ       | label å¡«å……é¢œè‰² |
| labelFontSize        | number  |          12          |                  | labelæ–‡å­—å¤§å°  |
| labelFontColor    | string  |        #000         |       æ”¯æŒ       | label æ–‡å­—é¢œè‰² |
| labelMaxLen       | number  |          5          |                  |    label å­—ç¬¦æœ€å¤§æ˜¾ç¤ºä¸ªæ•°ï¼Œè¶…å‡ºå­—ç¬¦å°†ç”¨...è¡¨ç¤º    |
| rollScal          | boolean | true  |                  |             æ˜¯å¦å…è®¸æ»šè½®ç¼©æ”¾             |
| createType        | boolean |   0   |                  |    0 ä¸åˆ›å»ºï¼Œ1 åˆ›å»ºçŸ©å½¢ï¼Œ2 åˆ›å»ºå¤šè¾¹å½¢ï¼Œ3 ç‚¹æ ‡æ³¨    |
| zoomCenter          | String  | canvasCenter  |                  | ç¼©æ”¾ä¸­å¿ƒï¼ˆcanvasCenter ç”»å¸ƒä¸­å¿ƒï¼Œmouse é¼ æ ‡ï¼‰ |

## 2ã€å®ä¾‹æ–¹æ³•

| æ–¹æ³•åç§°      | å‚æ•°ç±»å‹ |                 è¯´æ˜                  |
| ------------- | :------: | :-----------------------------------: |
| setImage      |  string  |             æ·»åŠ /åˆ‡æ¢å›¾ç‰‡             |
| setData       |  Array   |             åŠ è½½åˆå§‹æ•°æ®              |
| setScale      | boolean  |     true æ”¾å¤§ç”»å¸ƒï¼Œfalse ç¼©å°ç”»å¸ƒ     |
| fitZoom       |    æ—     |      é€‚é…å›¾ç‰‡åˆ°ç”»å¸ƒ ï¼ˆcontainï¼‰       |
| update        |    æ—     | æ›´æ–°ç”»å¸ƒï¼Œ ä¿®æ”¹å®ä¾‹å±æ€§åè¦æ‰§è¡Œæ­¤æ–¹æ³• |
| deleteByIndex |  number  |           æ ¹æ®ç´¢å¼•åˆ é™¤å½¢çŠ¶            |

## 3ã€äº‹ä»¶

| äº‹ä»¶åç§° | å›è°ƒå‚æ•° |        è¯´æ˜        |
| -------- | :------: | :----------------: |
| select   |   info   |   å½“å‰é€‰ä¸­çš„æ•°æ®   |
| add      |   info   |   å½“å‰æ·»åŠ çš„æ•°æ®   |
| delete   |   info   |   å½“å‰åˆ é™¤çš„æ•°æ®   |
| updated  |   info   | å‘ç”Ÿå˜åŒ–çš„å½¢çŠ¶æ•°æ® |
| load     |    æ—     |    å›¾ç‰‡åŠ è½½å®Œæˆ    |
| error    |  error   |      é”™è¯¯ä¿¡æ¯      |

## 3ã€å¿«æ·é”®äº‹ä»¶
| äº‹ä»¶åç§° | å›è°ƒå‚æ•° |        è¯´æ˜        |
| -------- | :------: | :----------------: |
| 'Escape', 'Backspace','Delete' |   åˆ é™¤æ ‡ç­¾   |   å½“å‰é€‰ä¸­çš„æ ‡ç­¾   |

## å¼•ç”¨å’Œå‚è€ƒå¤‡æ³¨
æœ¬é¡¹åœ¨[canvas-select](https://github.com/heylight/canvas-select)åŸºç¡€ä¸Šåšå‡ºæ”¹åŠ¨å®ç°ï¼Œæ„Ÿè°¢è¯¥ä½œè€…ğŸ™ã€‚


npm run build